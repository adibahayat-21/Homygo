<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Listings</title>
  <link href="https://fonts.googleapis.com/css2?family=MonteCarlo&family=Cormorant+Upright:wght@400;600&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Font Awesome CDN Link -->
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-pOa8YgI0hx6ZRscn9dqvBr5lLYST9Wyr4Om4aZ6wXh6c4Bwg3iQht5R0Xp6p/DRF7FheS3o2rJ4hXkCwXg6x6Q=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    />
  <link rel="stylesheet" href="/listings.css">
</head>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const elements = document.querySelectorAll('.reveal-text');

    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            typeText(entry.target);
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.5 });

      elements.forEach(el => observer.observe(el));
    } else {
      elements.forEach(el => typeText(el));
    }

    function typeText(el) {
      const text = el.getAttribute('data-text');
      el.textContent = ""; // start empty
      let i = 0;
      const speed = 50; // typing speed ms

      function typing() {
        if (i < text.length) {
          el.textContent += text.charAt(i);
          i++;
          setTimeout(typing, speed);
        } else {
          el.style.borderRight = "none"; // remove cursor when done
        }
      }
      typing();
    }
  });
  
    document.addEventListener('DOMContentLoaded', () => {
        const sidebarToggle = document.querySelector('.sidebar-toggle');
        const sidebar = document.querySelector('.sidebar');
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
        document.addEventListener('click', (event) => {
            if (!sidebar.contains(event.target) && !sidebarToggle.contains(event.target)) {
                sidebar.classList.remove('active');
            }
        });
    });
</script>
  <header>
        <div class="logo">
            <img src="/aircraft.png" alt="Logo">
            <h1>The HomyGo</h1>
        </div>
        <nav class="desktop-nav">
            <ul>
                <li><a href="/home">Home</a></li>
                <li><a href="/listings">Listings</a></li>
                <li><a href="/about">About</a></li>
              
            </ul>
        </nav>
        
        <div class="header-actions">
            <a href="/listings" class="cta">Book Your Stay</a>
            <% if(!check_user) { %>
                <a href="/login" class="header-auth-btn">Login</a>
                <a href="/signup" class="header-auth-btn">Signup</a>
            <% } else { %>
                <a href="/logout" class="header-auth-btn">Logout</a>
            <% } %>
        </div>

        <i class="fa-solid fa-bars sidebar-toggle"></i>
    </header>

      <div class="sidebar">
        <a href="/home">Home</a>
        <a href="/listings">Listings</a>
        <a href="/about">About</a>
       
        <% if(!check_user) { %>
            <a href="/login">Login</a>
            <a href="/signup">Signup</a>
        <% } else { %>
            <a href="/logout">Logout</a>
        <% } %>
    </div>


 <% if (success_msg && success_msg.length>0) { %>
  <div id="flashMsg" role="alert"
       style="
         position: fixed;
         top: 20px;
         left: 50%;
         transform: translateX(-50%);
         z-index: 9999;
         display: flex;
         align-items: center;
         gap: 12px;
         max-width: 920px;
         width: calc(100% - 40px);
         padding: 12px 16px;
         border-radius: 12px;
         background: linear-gradient(90deg, rgba(219, 28, 66, 0.95), rgba(227, 58, 83, 0.95));
         color: white;
         box-shadow: 0 8px 30px rgba(12, 20, 40, 0.35);
         font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
         font-size: 15px;
         line-height: 1.2;
         backdrop-filter: blur(6px);
         transition: transform 220ms ease, opacity 220ms ease;
       ">
    <!-- Icon -->
    <div style="
         min-width:36px;
         height:36px;
         border-radius: 9px;
         display:flex;
         align-items:center;
         justify-content:center;
         background: rgba(255,255,255,0.12);
         font-weight:700;
         font-size:18px;
       ">
      ✓
    </div>

    <!-- Message text -->
    <div style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding-right:8px;">
      <%= success_msg[0] %>
    </div>

    <!-- Close button -->
    <button aria-label="Close notification" onclick="closeFlash()" style="
        border: none;
        background: transparent;
        color: rgba(255,255,255,0.95);
        font-size: 16px;
        padding: 6px;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 120ms ease, background 120ms ease;
      " onmouseover="this.style.background='rgba(255,255,255,0.08)'" onmouseout="this.style.background='transparent'">
      ✕
    </button>
  </div>
  
  <script>
    (function() {
      var el = document.getElementById('flashMsg');
      if (!el) return;

      var timer = setTimeout(function () {
        el.style.opacity = '0';
        el.style.transform = 'translateX(-50%) translateY(-10px) scale(0.985)';
        setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 220);
      }, 4000);

      window.closeFlash = function() {
        clearTimeout(timer);
        el.style.opacity = '0';
        el.style.transform = 'translateX(-50%) translateY(-10px) scale(0.985)';
        setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 160);
      };
    })();
  </script>
<% } %>

 <% if (error_msg && error_msg.length>0) { %>
  <div id="flashMsg" role="alert"
       style="
         position: fixed;
         top: 20px;
         left: 50%;
         transform: translateX(-50%);
         z-index: 9999;
         display: flex;
         align-items: center;
         gap: 12px;
         max-width: 920px;
         width: calc(100% - 40px);
         padding: 12px 16px;
         border-radius: 12px;
         background: linear-gradient(90deg,rgba(55, 53, 53, 0.95),rgba(158, 156, 159, 0.95));
         color: white;
         box-shadow: 0 8px 30px rgba(12, 20, 40, 0.35);
         font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
         font-size: 15px;
         line-height: 1.2;
         backdrop-filter: blur(6px);
         transition: transform 220ms ease, opacity 220ms ease;
       ">
    <!-- Icon -->
    <div style="
         min-width:36px;
         height:36px;
         border-radius: 9px;
         display:flex;
         align-items:center;
         justify-content:center;
         background: rgba(255,255,255,0.12);
         font-weight:700;
         font-size:18px;
       ">
       ✕
    </div>

    <!-- Message text -->
    <div style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding-right:8px;">
      <%= error_msg[0] %>
    </div>

    <!-- Close button -->
    <button aria-label="Close notification" onclick="closeFlash()" style="
        border: none;
        background: transparent;
        color: rgba(255,255,255,0.95);
        font-size: 16px;
        padding: 6px;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 120ms ease, background 120ms ease;
      " onmouseover="this.style.background='rgba(255,255,255,0.08)'" onmouseout="this.style.background='transparent'">
      ✕
    </button>
  </div>
  
  <script>
    (function() {
      var el = document.getElementById('flashMsg');
      if (!el) return;

      var timer = setTimeout(function () {
        el.style.opacity = '0';
        el.style.transform = 'translateX(-50%) translateY(-10px) scale(0.985)';
        setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 220);
      }, 4000);

      window.closeFlash = function() {
        clearTimeout(timer);
        el.style.opacity = '0';
        el.style.transform = 'translateX(-50%) translateY(-10px) scale(0.985)';
        setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 160);
      };
    })();
  </script>
<% } %>

<!-- filters section -->
<div id="filters">
  <!-- Search bar -->
    <form method="POST" action="/listings/place">
  <div class="search-wrapper" role="search" aria-label="Search listings">
    <label for="search-input" class="visually-hidden">Search</label>
    <input
      id="search-input"
      class="search-input"
      type="search"
      name="search_place"
      placeholder="Search locations, countries..."
    />
    <button class="search-btn" type="submit" aria-label="Search">
      <i class="fas fa-magnifying-glass"></i>
      <span class="btn-text">Search</span>
    </button>
  </div>
    </form>

  <h2>Categories</h2>

  <div class="filter-container">
    <div class="filter-item">
      <a href="/listings/category/Trending">
        <i class="fas fa-fire"></i>
        <h3>Trending</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Rooms">
        <i class="fa-solid fa-bed"></i>
        <h3>Rooms</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Iconic Cities">
        <i class="fa-solid fa-mountain-city"></i>
        <h3>Iconic Cities</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Castles">
        <i class="fa-brands fa-fort-awesome-alt"></i>
        <h3>Castles</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Pools">
        <i class="fa-solid fa-water-ladder"></i>
        <h3>Pools</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Arctic">
        <i class="fa-solid fa-snowflake"></i>
        <h3>Arctic</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Farmhouse">
        <i class="fa-solid fa-wheat-awn"></i>
        <h3>Farmhouse</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Nature">
        <i class="fa-solid fa-tree"></i>
        <h3>Nature</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Beach">
        <i class="fa-solid fa-umbrella-beach"></i>
        <h3>Beach</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Camping">
        <i class="fa-solid fa-campground"></i>
        <h3>Camping</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Adventure">
        <i class="fa-solid fa-hiking"></i>
        <h3>Adventure</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Mountains">
        <i class="fa-solid fa-mountain"></i>
        <h3>Mountains</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Urban">
        <i class="fa-solid fa-city"></i>
        <h3>Urban</h3>
      </a>
    </div>

    <div class="filter-item">
      <a href="/listings/category/Boating">
        <i class="fa-solid fa-sailboat"></i>
        <h3>Boating</h3>
      </a>
    </div>
  </div>
</div>


  <!-- Section Heading -->
  <section class="section-heading">
    <h2 class="reed-title reveal-text" data-text="Explore Our Stays"></h2>
    <h3 class="reed-subtitle reveal-text" data-text="Find Your Perfect Gateway"></h3>
    <a href="/listings/new" class="cta add-btn">Add new Homygo</a>
  </section>

  <!-- Listings Grid -->
  <section class="listings-container">
    <% for (let d of listingdata) { %>
      <div class="listing-card">
        <div class="listing-image">
          <img src="<%= d.image.url %>" alt="<%= d.title %>">
        </div>
        <div class="overlay">
          <h3><%= d.title %></h3>
          <p style="font-size: 14px; margin-right: 20px;"><%= d.description %></p>
          <div class="listing-info">
            <span class="price">₹<%= d.price %></span>
            <span class="location" style="margin-right: 20px;"><%= d.location %>,
              <br>
               <%= d.country %></span>
          </div>
       
          <a href="/listings/<%= d._id %>" class="read-more">Read More</a>
       
        </div>
      </div>
    <% } %>
  </section>

</body>
</html>


 <footer class="footer" style="margin-top: 20px;">
  <div class="footer-container">

    <!-- Newsletter -->
    <div class="footer-newsletter">
      <h2>Newsletter</h2>
      <p>Sign up to receive updates and special offers.</p>
      <form>
        <input type="email" placeholder="Email *" required>
        <label>
          <input type="checkbox"> Yes, subscribe me to your newsletter.
        </label>
        <button type="submit">Submit</button>
      </form>
    </div>

    <!-- Address + Contact -->
    <div class="footer-info">
      <div>
        <h2>Address</h2>
        <p>500 Terry Francine St.<br>San Francisco, CA 94158</p>
      </div>
      <div>
        <h2>Contact</h2>
        <p>info@mysite.com<br>123-456-7890</p>
      </div>
    </div>

    <!-- Follow -->
    <div class="footer-follow">
      <h2>Follow</h2>
      <ul>
        <li><a href="#">Instagram</a></li>
        <li><a href="#">Facebook</a></li>
        <li><a href="#">TikTok</a></li>
      </ul>
      <div class="footer-links">
        <a href="#">Terms & Conditions</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Accessibility Statement</a>
      </div>
    </div>
  </div>

  <!-- Big decorative brand text -->
  <div class="footer-brand">
    The Homygo
  </div>

  <!-- Copyright -->
  <div class="footer-bottom">
    <p>© 2025 by The Homygo. Built with ❤</p>
  </div>
</footer>
</body>
</html>
